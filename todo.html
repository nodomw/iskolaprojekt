<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Todo list</title>
		<link rel="stylesheet" href="index.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
			integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	</head>

	<body>
		<div class="d-xl-flex flex-column justify-content-xl-center align-items-xl-center" style="height: 100vh;">
			<div class="card" style="width:350px;">
				<div class="card-header text-center">
					Todo list
				</div>
				<div class="alerts">
					<!-- use da functions brudda -->
				</div>
				<div class="card-body">
					<form>
						<input id="todo" class="form-control" type="text" placeholder="Todo" style="width: 310px;" />
						<div class="d-xl-flex justify-content-between align-items-xl-center"
							style="margin-top: 8px; width: 310px;">
							<button class="btn btn-primary d-xl-flex align-items-xl-center" id="addButton" type="button"
								onclick="Add()">Add</button>
							<button class="btn btn-primary d-xl-flex align-items-xl-center" id="removeButton"
								type="button" onclick="Remove()">Remove</button>
						</div>
					</form>
					<div class="todo-container" style="margin-top: 8px; height: 250px; overflow-y: scroll;">
						<ul class="list-group todo-items">
							<!-- enter stuff here via the functions  -->
							<!-- <li class="list-group-item todo-item">test
								</button class="btn btn-danger btn-close" aria-label="Close" role="button">
							</li> -->
						</ul>
					</div>
				</div>
			</div>
		</div>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
			crossorigin="anonymous"></script>
		<script> // event listeners
			window.addEventListener("mouseover", (event) => {
				if (event.target.id == "todo-item") {
					event.target.classList.add("active");
					event.target.setAttribute("aria-current", "true");
					// console.log("hovered");
				}
			});

			//TODO: make this work
			window.addEventListener("mouseout", (event) => {
				if (event.target.id == "todo-item") {
					event.target.classList.remove("active");
					event.target.setAttribute("aria-current", "false");
					// console.log("unhovered");
				}
			});
			window.addEventListener("click", (event) => {
				if (event.target.id == "btn-todo") {
					event.target.parentElement.remove();
				}
				if (event.target.id == "todo-item") {
					$(event.target).toggleClass("bg-success");
					$(event.target).find("button").toggleClass("btn-success");
				}
			});
			// TODO: style the close button to be more bootstrap-y
		</script>
		<script> // functions n stuff
			function CreateAlert(type, message) {
				$(".alerts").html(
					'<div class="alert alert-' + type + ' alert-dismissible fade show" role="alert">' + message + '<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div>'
				);
			}
			function Add() {
				var todo = document.getElementById("todo").value;
				if (todo == "") {
					CreateAlert("danger", "Please enter a todo");
					return;
				}
				// CreateAlert("success", "âœ…ðŸ“ˆ")
				$(".todo-items").append('<li class="list-group-item" id="todo-item"><button class="btn btn-danger btn-close" id="btn-todo"aria-label="Close" role="button"></button>' + todo + '</li>');
			}

			function Remove() {
				var todo = document.getElementById("todo").value;
				if (todo == "") {
					CreateAlert("danger", "Please enter a todo");
					return;
				}
				// CreateAlert("danger", "âœ…ðŸ“ˆ")
				$(".todo-items").find("li:contains('" + todo + "')").remove();
			}
		</script>
	</body>

</html>